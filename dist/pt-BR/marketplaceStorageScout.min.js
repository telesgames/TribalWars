(function () {}()); try { !function e(t,n,o){function i(u,c){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+u+"'")}var m=n[u]={exports:{}};t[u][0].call(m.exports,function(e){var n=t[u][1][e];return i(n?n:e)},m,m.exports,e,t,n,o)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,t,n){!function(t){"use strict";function n(){return r($("#premium_exchange_stock_"+x).text(),$("#premium_exchange_stock_"+b).text(),$("#premium_exchange_stock_"+v).text())}function o(){return r($("#premium_exchange_capacity_"+x).text(),$("#premium_exchange_capacity_"+b).text(),$("#premium_exchange_capacity_"+v).text())}function i(){return r($("#premium_exchange_rate_"+x+" div:first-child").text(),$("#premium_exchange_rate_"+b+" div:first-child").text(),$("#premium_exchange_rate_"+v+" div:first-child").text())}function r(e,t,n){return{wood:Number(e),stone:Number(t),iron:Number(n)}}function u(e){$("#premium_exchange_buy_wood input").val(e),setTimeout(function(){m("wood",.85*i().wood)},200)}function c(e){$("#premium_exchange_buy_stone input").val(e),setTimeout(function(){m("stone",.85*i().stone)},200)}function a(e){$("#premium_exchange_buy_iron input").val(e),setTimeout(function(){m("iron",.85*i().iron)},200)}function m(e,t){g.submit(),setTimeout(function(){var n=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),o=Number(n[5]),i=Number(n[2]),r=i/o;if(i<t)return void console.warn("FinalRate is too low ("+r+")");console.log(e+" -  bought "+i+" | rate = "+r+" | pp = "+o),$(".btn-confirm-yes").click(),f.addTransaction(e,i,-o)},200)}function l(e){$("#premium_exchange_sell_wood input").val(e),setTimeout(function(){p(e,"wood",l,1.25*i().wood)},200)}function s(e){$("#premium_exchange_sell_stone input").val(e),setTimeout(function(){p(e,"stone",s,1.25*i().stone)},200)}function _(e){$("#premium_exchange_sell_iron input").val(e),setTimeout(function(){p(e,"iron",_,1.25*i().iron)},200)}function p(e,t,n,o){var i;i=e%1e3==0?e:e+(1e3-e%1e3),g.submit(),setTimeout(function(){var r=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),u=Number(r[5]),c=Number(r[2]),a=c/u;if(a>o)return void console.warn("FinalRate is too high ("+a+")");c>i?($(".btn-confirm-no").click(),setTimeout(function(){console.log("Trying new value to sell"),n(e-a)},500)):(console.log(t+" -  sold "+c+" | rate = "+a+" | pp = "+u),$(".btn-confirm-yes").click(),f.addTransaction(t,-c,u))},200)}function d(){$("#premium_exchange_sell_wood input").val()&&l(Number($("#premium_exchange_sell_wood input").val())),$("#premium_exchange_sell_stone input").val()&&s(Number($("#premium_exchange_sell_stone input").val())),$("#premium_exchange_sell_iron input").val()&&_(Number($("#premium_exchange_sell_iron input").val())),$("#premium_exchange_buy_wood input").val()&&u(Number($("#premium_exchange_buy_wood input").val())),$("#premium_exchange_buy_stone input").val()&&c(Number($("#premium_exchange_buy_stone input").val())),$("#premium_exchange_buy_iron input").val()&&a(Number($("#premium_exchange_buy_iron input").val()))}var f=e("./marketplacePremiumTransactions.js"),h={getStock:n,getCapacity:o,getRates:i,buyWood:u,buyStone:c,buyIron:a,sellWood:l,sellStone:s,sellIron:_,executeSafeExchange:d,$btnCalculateExchange:$(".btn-premium-exchange-buy")};$.extend(t,h);var g=$("#premium_exchange_form"),x="wood",b="stone",v="iron"}(t.exports)},{"./marketplacePremiumTransactions.js":2}],2:[function(e,t,n){!function(e){"use strict";function t(){return c}function n(e,t,n){c.push({resource:e,amount:t,pps:n}),r()}function o(){localStorage.setItem(u,"")}function i(){var e=localStorage.getItem(u);c=e?JSON.parse(e):[]}function r(){localStorage.setItem(u,JSON.stringify(c))}$.extend(e,{getTransactions:t,addTransaction:n,clear:o});var u="marketplacePremiumExchange",c=[];!function(){i()}()}(t.exports)},{}],3:[function(e,t,n){!function(){"use strict";function t(){var e=n.getStock(),t=n.getRates();e.wood>t.wood||e.stone>t.stone||e.iron>t.iron?$(document).attr("title","COMPRAR"):$(document).attr("title",".................................");e.wood>t.wood?o.find("table tr td:nth-child(2)").css("background-color","#6d6dff"):o.find("table tr td:nth-child(2)").css("background-color","#f4e4bc"),e.stone>t.stone?o.find("table tr td:nth-child(3)").css("background-color","#6d6dff"):o.find("table tr td:nth-child(3)").css("background-color","#f4e4bc"),e.iron>t.iron?o.find("table tr td:nth-child(4)").css("background-color","#6d6dff"):o.find("table tr td:nth-child(4)").css("background-color","#f4e4bc")}var n=e("../../common/marketplace/marketplacePremiumExchange.js"),o=$("#premium_exchange_form");t(),setInterval(t,1e3)}()},{"../../common/marketplace/marketplacePremiumExchange.js":1}]},{},[3]); } catch(e) { console.error(e);alert(e); };