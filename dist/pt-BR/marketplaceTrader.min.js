(function () {}()); try { !function e(t,n,i){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+u+"'")}var m=n[u]={exports:{}};t[u][0].call(m.exports,function(e){var n=t[u][1][e];return o(n?n:e)},m,m.exports,e,t,n,i)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,t,n){!function(t){"use strict";function n(){return r($("#premium_exchange_stock_"+b).text(),$("#premium_exchange_stock_"+d).text(),$("#premium_exchange_stock_"+v).text())}function i(){return r($("#premium_exchange_capacity_"+b).text(),$("#premium_exchange_capacity_"+d).text(),$("#premium_exchange_capacity_"+v).text())}function o(){return r($("#premium_exchange_rate_"+b+" div:first-child").text(),$("#premium_exchange_rate_"+d+" div:first-child").text(),$("#premium_exchange_rate_"+v+" div:first-child").text())}function r(e,t,n){return{wood:Number(e),stone:Number(t),iron:Number(n)}}function u(e){$("#premium_exchange_buy_wood input").val(e),setTimeout(function(){m("wood",.85*o().wood)},200)}function a(e){$("#premium_exchange_buy_stone input").val(e),setTimeout(function(){m("stone",.85*o().stone)},200)}function c(e){$("#premium_exchange_buy_iron input").val(e),setTimeout(function(){m("iron",.85*o().iron)},200)}function m(e,t){h.submit(),setTimeout(function(){var n=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),i=Number(n[5]),o=Number(n[2]),r=o/i;if(o<t)return void console.warn("FinalRate is too low ("+r+")");console.log(e+" -  bought "+o+" | rate = "+r+" | pp = "+i),$(".btn-confirm-yes").click(),f.addTransaction(e,o,-i)},200)}function l(e){$("#premium_exchange_sell_wood input").val(e),setTimeout(function(){_(e,"wood",l,1.25*o().wood)},200)}function s(e){$("#premium_exchange_sell_stone input").val(e),setTimeout(function(){_(e,"stone",s,1.25*o().stone)},200)}function p(e){$("#premium_exchange_sell_iron input").val(e),setTimeout(function(){_(e,"iron",p,1.25*o().iron)},200)}function _(e,t,n,i){var o;o=e%1e3==0?e:e+(1e3-e%1e3),h.submit(),setTimeout(function(){var r=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),u=Number(r[5]),a=Number(r[2]),c=a/u;if(c>i)return void console.warn("FinalRate is too high ("+c+")");a>o?($(".btn-confirm-no").click(),setTimeout(function(){console.log("Trying new value to sell"),n(e-c)},500)):(console.log(t+" -  sold "+a+" | rate = "+c+" | pp = "+u),$(".btn-confirm-yes").click(),f.addTransaction(t,-a,u))},200)}function x(){$("#premium_exchange_sell_wood input").val()&&l(Number($("#premium_exchange_sell_wood input").val())),$("#premium_exchange_sell_stone input").val()&&s(Number($("#premium_exchange_sell_stone input").val())),$("#premium_exchange_sell_iron input").val()&&p(Number($("#premium_exchange_sell_iron input").val())),$("#premium_exchange_buy_wood input").val()&&u(Number($("#premium_exchange_buy_wood input").val())),$("#premium_exchange_buy_stone input").val()&&a(Number($("#premium_exchange_buy_stone input").val())),$("#premium_exchange_buy_iron input").val()&&c(Number($("#premium_exchange_buy_iron input").val()))}var f=e("./marketplacePremiumTransactions.js"),g={getStock:n,getCapacity:i,getRates:o,buyWood:u,buyStone:a,buyIron:c,sellWood:l,sellStone:s,sellIron:p,executeSafeExchange:x,$btnCalculateExchange:$(".btn-premium-exchange-buy")};$.extend(t,g);var h=$("#premium_exchange_form"),b="wood",d="stone",v="iron"}(t.exports)},{"./marketplacePremiumTransactions.js":2}],2:[function(e,t,n){!function(e){"use strict";function t(){return a}function n(e,t,n){a.push({resource:e,amount:t,pps:n}),r()}function i(){localStorage.setItem(u,"")}function o(){var e=localStorage.getItem(u);a=e?JSON.parse(e):[]}function r(){localStorage.setItem(u,JSON.stringify(a))}$.extend(e,{getTransactions:t,addTransaction:n,clear:i});var u="marketplacePremiumExchange",a=[];!function(){o()}()}(t.exports)},{}],3:[function(e,t,n){!function(){"use strict";var t=e("../../common/marketplace/marketplacePremiumExchange.js");t.$btnCalculateExchange.replaceWith($("<input>",{type:"button",class:"btn float_right btn-premium-exchange-buy",style:"margin-top: 10px; margin-bottom: 10px;",value:"Troca segura"}).click(t.executeSafeExchange))}()},{"../../common/marketplace/marketplacePremiumExchange.js":1}]},{},[3]); } catch(e) { console.error(e);alert(e); };