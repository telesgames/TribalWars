(function () {}()); try { !function e(t,n,o){function r(u,c){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t,n){!function(t){"use strict";function n(){return i($("#premium_exchange_stock_"+g).text(),$("#premium_exchange_stock_"+x).text(),$("#premium_exchange_stock_"+v).text())}function o(){return i($("#premium_exchange_capacity_"+g).text(),$("#premium_exchange_capacity_"+x).text(),$("#premium_exchange_capacity_"+v).text())}function r(){return i($("#premium_exchange_rate_"+g+" div:first-child").text(),$("#premium_exchange_rate_"+x+" div:first-child").text(),$("#premium_exchange_rate_"+v+" div:first-child").text())}function i(e,t,n){return{wood:Number(e),stone:Number(t),iron:Number(n)}}function u(e){$("#premium_exchange_buy_wood input").val(e),setTimeout(function(){l("wood",.85*r().wood)},200)}function c(e){$("#premium_exchange_buy_stone input").val(e),setTimeout(function(){l("stone",.85*r().stone)},200)}function a(e){$("#premium_exchange_buy_iron input").val(e),setTimeout(function(){l("iron",.85*r().iron)},200)}function l(e,t){b.submit(),setTimeout(function(){var n=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),o=Number(n[5]),r=Number(n[2]),i=r/o;if(r<t)return void console.warn("FinalRate is too low ("+i+")");console.log(e+" -  bought "+r+" | rate = "+i+" | pp = "+o),$(".btn-confirm-yes").click(),p.addTransaction(e,r,-o)},200)}function s(e){$("#premium_exchange_sell_wood input").val(e),setTimeout(function(){_(e,"wood",s,1.25*r().wood)},200)}function m(e){$("#premium_exchange_sell_stone input").val(e),setTimeout(function(){_(e,"stone",m,1.25*r().stone)},200)}function d(e){$("#premium_exchange_sell_iron input").val(e),setTimeout(function(){_(e,"iron",d,1.25*r().iron)},200)}function _(e,t,n,o){var r;r=e%1e3==0?e:e+(1e3-e%1e3),b.submit(),setTimeout(function(){var i=$("#premium_exchange table tr:nth-child(2) td:nth-child(2)").text().split(" "),u=Number(i[5]),c=Number(i[2]),a=c/u;if(a>o)return void console.warn("FinalRate is too high ("+a+")");c>r?($(".btn-confirm-no").click(),setTimeout(function(){console.log("Trying new value to sell"),n(e-a)},500)):(console.log(t+" -  sold "+c+" | rate = "+a+" | pp = "+u),$(".btn-confirm-yes").click(),p.addTransaction(t,-c,u))},200)}function f(){$("#premium_exchange_sell_wood input").val()&&s(Number($("#premium_exchange_sell_wood input").val())),$("#premium_exchange_sell_stone input").val()&&m(Number($("#premium_exchange_sell_stone input").val())),$("#premium_exchange_sell_iron input").val()&&d(Number($("#premium_exchange_sell_iron input").val())),$("#premium_exchange_buy_wood input").val()&&u(Number($("#premium_exchange_buy_wood input").val())),$("#premium_exchange_buy_stone input").val()&&c(Number($("#premium_exchange_buy_stone input").val())),$("#premium_exchange_buy_iron input").val()&&a(Number($("#premium_exchange_buy_iron input").val()))}var p=e("./marketplacePremiumTransactions.js"),h={getStock:n,getCapacity:o,getRates:r,buyWood:u,buyStone:c,buyIron:a,sellWood:s,sellStone:m,sellIron:d,executeSafeExchange:f,$btnCalculateExchange:$(".btn-premium-exchange-buy")};$.extend(t,h);var b=$("#premium_exchange_form"),g="wood",x="stone",v="iron"}(t.exports)},{"./marketplacePremiumTransactions.js":2}],2:[function(e,t,n){!function(e){"use strict";function t(){return c}function n(e,t,n){c.push({resource:e,amount:t,pps:n}),i()}function o(){localStorage.setItem(u,"")}function r(){var e=localStorage.getItem(u);c=e?JSON.parse(e):[]}function i(){localStorage.setItem(u,JSON.stringify(c))}$.extend(e,{getTransactions:t,addTransaction:n,clear:o});var u="marketplacePremiumExchange",c=[];!function(){r()}()}(t.exports)},{}],3:[function(e,t,n){!function(){"use strict";function t(){var e=o.getRates();n(e),e.wood===u.wood&&e.stone===u.stone&&e.iron===u.iron||(u=e,c.push(e),console.log(e))}function n(e){e.wood<r.sell.wood||e.stone<r.sell.stone||e.iron<r.sell.iron?$(document).attr("title","VENDER"):e.wood>r.buy.wood||e.stone>r.buy.stone||e.iron>r.buy.iron?$(document).attr("title","COMPRAR"):$(document).attr("title",".................................");e.wood<r.sell.wood?i.find("table tr td:nth-child(2)").css("background-color","#ff4444"):e.wood>r.buy.wood?i.find("table tr td:nth-child(2)").css("background-color","#6d6dff"):i.find("table tr td:nth-child(2)").css("background-color","#f4e4bc"),e.stone<r.sell.stone?i.find("table tr td:nth-child(3)").css("background-color","#ff4444"):e.stone>r.buy.stone?i.find("table tr td:nth-child(3)").css("background-color","#6d6dff"):i.find("table tr td:nth-child(3)").css("background-color","#f4e4bc"),e.iron<r.sell.iron?i.find("table tr td:nth-child(4)").css("background-color","#ff4444"):e.iron>r.buy.iron?i.find("table tr td:nth-child(4)").css("background-color","#6d6dff"):i.find("table tr td:nth-child(4)").css("background-color","#f4e4bc")}var o=e("../../common/marketplace/marketplacePremiumExchange.js"),r={};!function(){var e=prompt("buy: wood;stone;iron - sell: wood;stone;iron","500; 500; 500; 200; 200; 200").split(";");r={buy:{wood:Number(e[0]),stone:Number(e[1]),iron:Number(e[2])},sell:{wood:Number(e[3]),stone:Number(e[4]),iron:Number(e[5])}}}();var i=$("#premium_exchange_form"),u=o.getRates(),c=[u];n(c[0]),setInterval(t,1e3)}()},{"../../common/marketplace/marketplacePremiumExchange.js":1}]},{},[3]); } catch(e) { console.error(e);alert(e); };